<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Othello - Main Menu</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
          integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Add basic styling for the main menu page itself, inheriting from style.css */
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center; /* Center content vertically */
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }

        #container {
            text-align: center;
            padding: 20px;
            width: 90%; /* Make container responsive */
            max-width: 600px; /* Limit max width */
            background-color: var(--background-color-2); /* Add a background */
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            margin-top: auto; /* Push down if content above is short */
             margin-bottom: auto; /* Push up if content below is short */
        }

        #container h1 {
            font-size: 3rem;
            margin-bottom: 2rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        /* Style for both menu containers */
        .menu-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 1.5rem;
            margin-top: 2rem;
            width: 100%; /* Make menu container responsive */
        }

        /* Initially hide sections other than main menu */
        #bot-difficulty-options,
        #player-setup {
            display: none;
        }

         /* Style for headings within sections */
        #bot-difficulty-options h2,
        #player-setup h2 {
             font-size: 1.5rem;
             margin-bottom: 0.5rem; /* Space below heading */
             text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .menu-container button {
            padding: 18px 36px;
            font-size: 1.2rem;
            font-weight: 600;
            background-color: var(--button-color);
            color: var(--button-text-color);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            min-width: 250px;
             width: 100%; /* Make buttons take full width of container */
             max-width: 250px; /* Limit max width even with width: 100% */
        }

        .menu-container button:hover {
            background-color: var(--button-hover-color);
            transform: translateY(-3px) scale(1.03);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.15);
        }

         /* Styles for the player setup form elements */
        #player-setup .player-input-group {
             margin-bottom: 1.5rem;
             width: 100%;
             max-width: 300px;
             text-align: left;
        }

         #player-setup .player-input-group label {
             display: block;
             margin-bottom: 0.5rem;
             font-size: 1.1rem;
             color: var(--text-color);
         }

        #player-setup .player-input-group input[type="text"] {
             width: 100%;
             padding: 10px;
             font-size: 1rem;
             border-radius: 5px;
             border: 1px solid #ccc;
             box-sizing: border-box; /* Include padding in width */
             background-color: var(--background-color-1);
             color: var(--text-color);
        }
         #player-setup .player-input-group input[type="text"]::placeholder {
             color: var(--skip-history-text-color);
         }


        #player-setup .color-choice {
             display: flex;
             justify-content: center; /* Center color options */
             gap: 20px;
             margin-bottom: 2rem;
        }

        #player-setup .color-choice label {
             display: flex;
             align-items: center;
             cursor: pointer;
             font-size: 1.1rem;
             color: var(--text-color);
        }

        #player-setup .color-choice input[type="radio"] {
             margin-right: 8px;
             /* Custom styling for radio buttons if desired */
        }
         /* Add visual indicator for selected color */
        #player-setup .color-choice input[type="radio"]:checked + span {
             font-weight: bold;
             text-decoration: underline;
         }


         /* Responsive adjustments for index page */
         @media (max-width: 600px) {
              #container h1 {
                  font-size: 2.5rem;
              }
               .menu-container button {
                  padding: 15px 30px;
                  font-size: 1.1rem;
                  min-width: 200px;
                   max-width: 200px;
              }
               #bot-difficulty-options h2,
               #player-setup h2 {
                   font-size: 1.3rem;
               }
              #player-setup .player-input-group {
                  max-width: 250px;
              }
               #player-setup .player-input-group input[type="text"] {
                   padding: 8px;
                   font-size: 0.95rem;
               }
               #player-setup .color-choice label {
                   font-size: 1rem;
               }
         }

         @media (max-width: 400px) {
              #container h1 {
                  font-size: 2rem;
              }
               .menu-container button {
                  padding: 12px 25px;
                  font-size: 1rem;
                  min-width: 180px;
                   max-width: 180px;
              }
              #bot-difficulty-options h2,
              #player-setup h2 {
                   font-size: 1.1rem;
               }
              #player-setup .player-input-group {
                   max-width: 200px;
              }
               #player-setup .player-input-group input[type="text"] {
                   padding: 6px;
                   font-size: 0.9rem;
               }
               #player-setup .color-choice label {
                   font-size: 0.9rem;
               }
         }


         /* Footer positioning fix for centered content */
         footer {
             position: static; /* Allow footer to flow naturally after centered content */
             margin-top: auto; /* Push footer to the bottom if body has flex-direction: column */
             width: 100%;
             padding: 1rem 0;
             text-align: center;
             color: var(--skip-history-text-color, #9ca3af); /* Use variable from style.css */
             font-size: 0.9rem;
             background-color: var(--background-color-2, rgba(0, 0, 0, 0.5)); /* Use variable */
             box-shadow: none; /* Remove shadow */
         }
         footer a {
            color: inherit !important; /* Ensure link color inherits from footer */
            text-decoration: none;
         }


    </style>
    <script>
        // Load and apply theme from localStorage using variables
        function applyTheme(themeName) {
            // Define themes here or ideally load from a shared file if complexity grows
            const colorThemes = {
            default: {
                'background-color-1': '#1f372b',
                'background-color-2': '#112719',
                'text-color': '#ffffff',
                'button-color': '#34d399',
                'button-text-color': '#1f2937',
                'button-hover-color': '#10b981',
                'board-color': '#059669',
                'scoreboard-text-color': '#ffffff',
                'skip-history-heading-color': '#ffffff',
                'skip-history-text-color': '#9ca3af',
                'piece-black-dark': '#000',
                'piece-black-light': '#444',
                'piece-white-dark': '#ddd',
                'piece-white-light': '#fff',
                'last-move-dot-color': '#ff0000'
            },
            dark: {
                'background-color-1': '#333333',
                'background-color-2': '#222222',
                'text-color': '#eeeeee',
                'button-color': '#555555',
                'button-text-color': '#ffffff',
                'button-hover-color': '#777777',
                'board-color': '#444444',
                'scoreboard-text-color': '#eeeeee',
                'skip-history-heading-color': '#eeeeee',
                'skip-history-text-color': '#9ca3af',
                'piece-black-dark': '#111',
                'piece-black-light': '#555',
                'piece-white-dark': '#ccc',
                'piece-white-light': '#eee',
                 'last-move-dot-color': '#ff0000'
            },
            forest: {
                'background-color-1': '#38593b',
                'background-color-2': '#2b3a2d',
                'text-color': '#d0e8ca',
                'button-color': '#6b8e23',
                'button-text-color': '#ffffff',
                'button-hover-color': '#8fbc5a',
                'board-color': '#4c6d4f',
                'scoreboard-text-color': '#d0e8ca',
                'skip-history-heading-color': '#d0e8ca',
                'skip-history-text-color': '#9ca3af',
                 'piece-black-dark': '#000',
                'piece-black-light': '#333',
                'piece-white-dark': '#c0d9bc',
                'piece-white-light': '#e0f9dc',
                 'last-move-dot-color': '#ff0000'
            },
             // Removed old midnight, reddish, royal themes

            // --- New Themes based on Image Palettes ---
             grapefruit: {
                 'background-color-1': '#EC5564',
                 'background-color-2': '#D94452',
                 'text-color': '#ffffff',
                 'button-color': '#F76D82',
                 'button-text-color': '#1f2937',
                 'button-hover-color': '#FC8370',
                 'board-color': '#EC5564',
                 'scoreboard-text-color': '#ffffff',
                 'skip-history-heading-color': '#ffffff',
                 'skip-history-text-color': '#cccccc',
                 'piece-black-dark': '#000', 'piece-black-light': '#444',
                 'piece-white-dark': '#ddd', 'piece-white-light': '#fff',
                 'last-move-dot-color': '#ff0000'
             },
             bittersweet: {
                 'background-color-1': '#FB6D51',
                 'background-color-2': '#E8563F',
                 'text-color': '#ffffff',
                 'button-color': '#FC8370',
                 'button-text-color': '#1f2937',
                 'button-hover-color': '#fb6d51',
                 'board-color': '#FB6D51',
                 'scoreboard-text-color': '#ffffff',
                 'skip-history-heading-color': '#ffffff',
                 'skip-history-text-color': '#cccccc',
                 'piece-black-dark': '#000', 'piece-black-light': '#444',
                 'piece-white-dark': '#ddd', 'piece-white-light': '#fff',
                 'last-move-dot-color': '#ff0000'
             },
             sunflower: {
                 'background-color-1': '#FECD57',
                 'background-color-2': '#F5BA45',
                 'text-color': '#1f2937',
                 'button-color': '#FCD277',
                 'button-text-color': '#1f2937',
                 'button-hover-color': '#FECD57',
                 'board-color': '#FECD57',
                 'scoreboard-text-color': '#1f2937',
                 'skip-history-heading-color': '#1f2937',
                 'skip-history-text-color': '#444444',
                 'piece-black-dark': '#000', 'piece-black-light': '#444',
                 'piece-white-dark': '#ddd', 'piece-white-light': '#fff',
                 'last-move-dot-color': '#ff0000'
             },
             grass: {
                 'background-color-1': '#9ED36A',
                 'background-color-2': '#8AC054',
                 'text-color': '#1f2937',
                 'button-color': '#84E080',
                 'button-text-color': '#1f2937',
                 'button-hover-color': '#62DDBD',
                 'board-color': '#9ED36A',
                 'scoreboard-text-color': '#1f2937',
                 'skip-history-heading-color': '#1f2937',
                 'skip-history-text-color': '#444444',
                 'piece-black-dark': '#000', 'piece-black-light': '#444',
                 'piece-white-dark': '#ddd', 'piece-white-light': '#fff',
                 'last-move-dot-color': '#ff0000'
             },
             mint: {
                 'background-color-1': '#46CEAD',
                 'background-color-2': '#35BB9B',
                 'text-color': '#ffffff',
                 'button-color': '#62DDBD',
                 'button-text-color': '#1f2937',
                 'button-hover-color': '#84E080',
                 'board-color': '#46CEAD',
                 'scoreboard-text-color': '#ffffff',
                 'skip-history-heading-color': '#ffffff',
                 'skip-history-text-color': '#cccccc',
                 'piece-black-dark': '#000', 'piece-black-light': '#444',
                 'piece-white-dark': '#ddd', 'piece-white-light': '#fff',
                 'last-move-dot-color': '#ff0000'
             },
             aqua: {
                 'background-color-1': '#5EC0C0',
                 'background-color-2': '#40A9A9',
                 'text-color': '#ffffff',
                 'button-color': '#7BC9C9',
                 'button-text-color': '#1f2937',
                 'button-hover-color': '#5a9ed0',
                 'board-color': '#5EC0C0',
                 'scoreboard-text-color': '#ffffff',
                 'skip-history-heading-color': '#ffffff',
                 'skip-history-text-color': '#cccccc',
                 'piece-black-dark': '#000', 'piece-black-light': '#444',
                 'piece-white-dark': '#ddd', 'piece-white-light': '#fff',
                 'last-move-dot-color': '#ff0000'
             },
             bluejeans: {
                 'background-color-1': '#5E9CEA',
                 'background-color-2': '#4B89DA',
                 'text-color': '#ffffff',
                 'button-color': '#73B1F4',
                 'button-text-color': '#1f2937',
                 'button-hover-color': '#3282b8',
                 'board-color': '#5E9CEA',
                 'scoreboard-text-color': '#ffffff',
                 'skip-history-heading-color': '#ffffff',
                 'skip-history-text-color': '#cccccc',
                 'piece-black-dark': '#000', 'piece-black-light': '#444',
                 'piece-white-dark': '#ddd', 'piece-white-light': '#fff',
                 'last-move-dot-color': '#ff0000'
             },
             lavenderpurple: {
                 'background-color-1': '#AC92EA',
                 'background-color-2': '#967ADA',
                 'text-color': '#1f2937',
                 'button-color': '#B3A5EF',
                 'button-text-color': '#1f2937',
                 'button-hover-color': '#F299CE',
                 'board-color': '#AC92EA',
                 'scoreboard-text-color': '#1f2937',
                 'skip-history-heading-color': '#1f2937',
                 'skip-history-text-color': '#444444',
                 'piece-black-dark': '#000', 'piece-black-light': '#444',
                 'piece-white-dark': '#ddd', 'piece-white-light': '#fff',
                 'last-move-dot-color': '#ff0000'
             },
             lavenderpink: {
                 'background-color-1': '#EB87BF',
                 'background-color-2': '#D670AC',
                 'text-color': '#1f2937',
                 'button-color': '#F299CE',
                 'button-text-color': '#1f2937',
                 'button-hover-color': '#B3A5EF',
                 'board-color': '#EB87BF',
                 'scoreboard-text-color': '#1f2937',
                 'skip-history-heading-color': '#1f2937',
                 'skip-history-text-color': '#444444',
                 'piece-black-dark': '#000', 'piece-black-light': '#444',
                 'piece-white-dark': '#ddd', 'piece-white-light': '#fff',
                 'last-move-dot-color': '#ff0000'
             },
             skintone: {
                 'background-color-1': '#F0C8A5',
                 'background-color-2': '#E4B693',
                 'text-color': '#1f2937',
                 'button-color': '#F4D0B5',
                 'button-text-color': '#1f2937',
                 'button-hover-color': '#FC8370',
                 'board-color': '#F0C8A5',
                 'scoreboard-text-color': '#1f2937',
                 'skip-history-heading-color': '#1f2937',
                 'skip-history-text-color': '#444444',
                 'piece-black-dark': '#000', 'piece-black-light': '#444',
                 'piece-white-dark': '#ddd', 'piece-white-light': '#fff',
                 'last-move-dot-color': '#ff0000'
             },
             lightgray: {
                 'background-color-1': '#E5E8EC',
                 'background-color-2': '#CBD0D8',
                 'text-color': '#1f2937',
                 'button-color': '#F4F6F9',
                 'button-text-color': '#1f2937',
                 'button-hover-color': '#A9B1BC',
                 'board-color': '#E5E8EC',
                 'scoreboard-text-color': '#1f2937',
                 'skip-history-heading-color': '#1f2937',
                 'skip-history-text-color': '#444444',
                 'piece-black-dark': '#000', 'piece-black-light': '#444',
                 'piece-white-dark': '#ddd', 'piece-white-light': '#fff',
                 'last-move-dot-color': '#ff0000'
             },
             darkgray: {
                 'background-color-1': '#646C77',
                 'background-color-2': '#424953',
                 'text-color': '#ffffff',
                 'button-color': '#A9B1BC',
                 'button-text-color': '#1f2937',
                 'button-hover-color': '#E5E8EC',
                 'board-color': '#646C77',
                 'scoreboard-text-color': '#ffffff',
                 'skip-history-heading-color': '#ffffff',
                 'skip-history-text-color': '#cccccc',
                 'piece-black-dark': '#000', 'piece-black-light': '#444',
                 'piece-white-dark': '#ddd', 'piece-white-light': '#fff',
                 'last-move-dot-color': '#ff0000'
             }
        };
            const theme = colorThemes[themeName];
            if (theme) {
                for (const [variable, value] of Object.entries(theme)) {
                    document.documentElement.style.setProperty(`--${variable}`, value);
                }
            }
        }

        function loadTheme() {
            const theme = localStorage.getItem('color-theme') || 'default';
            applyTheme(theme);
        }

        // Apply theme on load
        loadTheme();

        // Listen for theme changes from other pages (like settings)
        window.addEventListener('storage', function (event) {
            if (event.key === 'color-theme') {
                loadTheme();
            }
        });


        document.addEventListener('DOMContentLoaded', () => {
            const mainMenuOptions = document.querySelector('.main-menu-options');
            const botDifficultyOptions = document.getElementById('bot-difficulty-options');
            const playerSetupOptions = document.getElementById('player-setup'); // Get the new setup container

            const playBotSelectButton = document.getElementById('play-bot-select');
            const playPlrSelectButton = document.getElementById('play-plr-select'); // Get the PvPL button
            const backFromBotButton = document.getElementById('back-to-main-menu');
            const backFromPlayerSetupButton = document.getElementById('back-from-player-setup'); // New back button

            const difficultyButtons = botDifficultyOptions.querySelectorAll('button[data-difficulty]');
            const startGameButton = document.getElementById('start-pvp-game'); // New start button

            // Helper to show/hide containers
            function showContainer(containerToShow) {
                 mainMenuOptions.style.display = 'none';
                 botDifficultyOptions.style.display = 'none';
                 playerSetupOptions.style.display = 'none';

                 if(containerToShow) {
                     containerToShow.style.display = 'flex'; // Assuming containers are flex columns
                 }
            }


            // Show difficulty options when "Player vs Bot" is clicked
            if (playBotSelectButton) {
                playBotSelectButton.addEventListener('click', () => {
                    showContainer(botDifficultyOptions);
                });
            }

             // Show player setup options when "Player vs Player" is clicked
             if (playPlrSelectButton) {
                 playPlrSelectButton.addEventListener('click', () => {
                     showContainer(playerSetupOptions);
                 });
             }


            // Back buttons
            if (backFromBotButton) {
                 backFromBotButton.addEventListener('click', () => {
                     showContainer(mainMenuOptions);
                 });
            }
             if (backFromPlayerSetupButton) {
                  backFromPlayerSetupButton.addEventListener('click', () => {
                     showContainer(mainMenuOptions);
                 });
             }


            // Handle difficulty button clicks (for Bot mode)
            difficultyButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const difficulty = button.dataset.difficulty;
                    // Navigate to othellobot.html with the selected difficulty as a URL parameter
                    window.location.href = `othellobot.html?difficulty=${difficulty}`;
                });
            });


             // Handle Start Player vs Player Game button click
             if (startGameButton) {
                 startGameButton.addEventListener('click', () => {
                     const player1NameInput = document.getElementById('player1-name');
                     const player2NameInput = document.getElementById('player2-name');
                     const player1ColorRadio = document.querySelector('input[name="player1-color"]:checked');

                     const player1Name = player1NameInput.value.trim() || 'Player 1'; // Default name
                     const player2Name = player2NameInput.value.trim() || 'Player 2'; // Default name
                     const player1Color = player1ColorRadio ? player1ColorRadio.value : 'black'; // Default to black if none selected

                     const player2Color = (player1Color === 'black') ? 'white' : 'black';

                     // Store player setup data in localStorage
                     const playerSetupData = {
                         player1Name: player1Name,
                         player1Color: player1Color,
                         player2Name: player2Name,
                         player2Color: player2Color
                     };
                     localStorage.setItem('othelloPlayerSetup', JSON.stringify(playerSetupData));

                     // Navigate to the player vs player game page
                     window.location.href = 'othelloplr.html';
                 });
             }


        }); // End DOMContentLoaded
     </script>

</head>
<body>
    <div id="container">
        <h1>Othello</h1>

        <!-- Main Menu Options -->
        <div class="menu-container main-menu-options">
            <button id="play-bot-select">Player vs Bot</button>
            <button id="play-plr-select">Player vs Player</button> <!-- Changed to an ID -->
            <button onclick="location.href='settings.html'">Settings</button>
        </div>

        <!-- Bot Difficulty Options (Initially Hidden) -->
        <div class="menu-container" id="bot-difficulty-options">
             <h2>Select Bot Difficulty</h2>
            <button data-difficulty="easy">Easy</button>
            <button data-difficulty="medium">Medium</button>
            <button data-difficulty="hard">Hard</button>
            <button id="back-to-main-menu">Back</button>
        </div>

         <!-- Player vs Player Setup (Initially Hidden) -->
         <div class="menu-container" id="player-setup">
             <h2>Player Setup</h2>
             <div class="player-input-group">
                 <label for="player1-name">Player 1 Name:</label>
                 <input type="text" id="player1-name" placeholder="Enter name">
             </div>
              <div class="player-input-group">
                 <label for="player2-name">Player 2 Name:</label>
                 <input type="text" id="player2-name" placeholder="Enter name">
             </div>
             <div class="color-choice">
                 <span>Player 1 chooses:</span>
                 <label><input type="radio" name="player1-color" value="black" checked> <span>Black</span></label>
                 <label><input type="radio" name="player1-color" value="white"> <span>White</span></label>
             </div>
             <button id="start-pvp-game">Start Game</button>
             <button id="back-from-player-setup">Back</button>
         </div>
    </div>

    <footer>
        <a href="https://www.instagram.com/sidonstudio/">Developed by @SidonStudio</a>
    </footer>
</body>
</html>